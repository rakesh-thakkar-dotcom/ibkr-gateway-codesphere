# conf.public.yaml
# Valid schema for IBKR Client Portal Gateway (2023+ builds)

# Country hint for login page
ip2loc: "US"

# Upstream (IBKR) API edge
proxyRemoteSsl: true
proxyRemoteHost: "https://api.ibkr.com"

# Where the Gateway listens *inside the container*
listenPort: 5000
listenSsl: true

# Which API surface to expose
svcEnvironment: "v1"

# The bundled keystore the Gateway ships with
sslCert: "root/conf/vertx.jks"
sslPwd: "mywebapi"

# <<< IMPORTANT: set this to your public Render base URL >>>
# This fixes the login redirects so the browser returns to your Render host,
# not to https://localhost:5000
portalBaseURL: "https://ibkr-gateway-new-2.onrender.com"

# Runtime tuning (safe defaults)
serverOptions:
  blockedThreadCheckInterval: 1000000
  eventLoopPoolSize: 20
  workerPoolSize: 20
  maxWorkerExecuteTime: 100
  internalBlockingPoolSize: 20

# CORS: keep open; weâ€™re fronted by Nginx/Render TLS anyway
cors:
  origin.allowed: ""
  allowCredentials: false

# Static demo app (optional)
webApps:
  - name: "demo"
    index: "index.html"

# IP allow/deny (Gateway checks this before auth)
ips:
  allow:
    - 0.0.0.0
    - 127.0.0.1
    - 172.17.0.*
  deny: []

